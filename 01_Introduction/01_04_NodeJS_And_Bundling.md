# NodeJS и Сборка

## Что такое NodeJS?

**React** — это библиотека, основанная на JavaScript, и для полноценной работы с ней необходима среда выполнения JavaScript. Этой средой является **Node.js**.

**Node.js** — это серверная среда выполнения JavaScript, позволяющая разрабатывать масштабируемые и высокопроизводительные приложения [^1].

> [!NOTE]
> Помимо Node.js, существуют и другие среды выполнения JavaScript, такие как _Bun_ и _Deno_. Они предлагают современные решения и повышенную безопасность, однако Node.js остается наиболее популярной благодаря огромному сообществу и развитой экосистеме библиотек.

## Установка Node.js

Для установки Node.js выполните следующие шаги:

1. Перейдите на официальный сайт: https://nodejs.org/en/download/.
2. Выберите установщик для вашей операционной системы (Windows, macOS, Linux).
3. Загрузите и запустите установщик, следуя инструкциям.

<img src="https://img001.prntscr.com/file/img001/4Fk7ldmKRXeXU03tWXbeeQ.png" width="600" alt="NodeJS download page" />

После установки проверьте корректность установки, открыв терминал и введя команды для проверки версий _Node.js_:

```bash
node -v  # Проверка версии Node.js
```

## Что такое npm?

**npm (Node Package Manager)** — это встроенный менеджер пакетов для Node.js. Он позволяет разработчикам управлять сторонними библиотеками и зависимостями в проектах.

**Основные функции npm**:

- **Установка пакетов**. Добавление библиотек, необходимых для разработки.
- **Управление зависимостями**. Обновление или удаление установленных библиотек.
- **Автоматизация задач**. Запуск скриптов, указанных в файле `package.json`.

Простыми словами, с помощью этой утилиты можно управлять библиотеками в своем проекте через команды в терминале: добавлять новые, удалять ненужные или изменять их версии. Нет необходимости самостоятельно искать и загружать файлы вручную — npm выполнит всю работу за разработчика.

> [!NOTE]
> Помимо npm, существуют альтернативные менеджеры пакетов, такие как _yarn_ и _pnpm_. Они могут быть более быстрыми или иметь дополнительные функции, но npm остается наиболее распространенным выбором.

## Что такое сборка в веб-разработке?

**Сборка** (или bundling) — это процесс, в ходе которого все импортированные файлы приложения объединяются в один или несколько «собранных» файлов, называемых **бандлами** (_bundles_). После этого бандлы подключаются к веб-странице и загружают всё приложение за один раз.

### Основные задачи сборки

1. **Объединение файлов**. Сокращает количество HTTP-запросов, объединяя множество отдельных файлов (JavaScript, CSS) в один.
2. **Транспиляция кода**. Преобразует современные версии JavaScript (например, ES6+) в код, совместимый с более старыми браузерами.
3. **Минификация**. Уменьшает размер файлов за счет удаления пробелов, комментариев и неиспользуемого кода.
4. **Оптимизация ресурсов**. Сжимает изображения, стили и скрипты, что ускоряет загрузку страниц.
5. **Управление зависимостями**. Автоматически подключает сторонние библиотеки и плагины.

### Пример работы сборки

Предположим, у вас есть два файла в приложении:

1. `app.js` — основной файл с логикой приложения:

   ```javascript
   import { add } from './math.js';
   console.log(add(16, 26)); // 42
   ```

2. `math.js` — модуль с функцией сложения:
   ```javascript
   export function add(a, b) {
     return a + b;
   }
   ```

В процессе сборки инструменты, объединят эти файлы в единый `bundle.js`:

```javascript
function add(a, b) {
  return a + b;
}
console.log(add(16, 26));
```

После минификации код будет выглядеть следующим образом:

```javascript
function add(a, b){return a + b;}console.log(add(16, 26));
```

Сборка уменьшает размер файлов, оптимизирует их загрузку и повышает скорость работы приложений.

Современные инструменты сборки позволяют также разделять код на модули (*код сплиттинг*) и загружать их по мере необходимости, что делает приложения ещё более быстрыми и удобными для пользователей.

### Инструменты сборки

В современной веб-разработке существует множество инструментов сборки, каждый из которых имеет свои особенности и преимущества. Наиболее популярные из них — **Webpack** и **Vite**.

#### Webpack

**Webpack** — это мощный и гибкий инструмент, который долгое время был стандартом для сборки JavaScript-приложений [^3].

**Особенности**:

- Позволяет объединять JavaScript, CSS, изображения и другие файлы в один или несколько бандлов.
- Поддерживает транспиляцию, минификацию и код сплиттинг.
- Расширяем через плагины и конфигурации.

#### Vite

**Vite** — это современный инструмент сборки, предлагающий быстрый старт и высокую производительность. Его популярность растет благодаря новейшим технологиям, которые делают процесс разработки более эффективным.

**Преимущества Vite**

1. **Мгновенный запуск сервера разработки**. Vite использует современные браузеры с поддержкой ES-модулей, что позволяет загружать только изменяемый код, не создавая бандлы на этапе разработки.
2. **Скорость сборки**. Vite использует **esbuild**, написанный на языке Go, для предварительной упаковки зависимостей. Это значительно ускоряет процесс по сравнению с инструментами на базе JavaScript, достигая прироста скорости в 10–100 раз.
3. **Умное управление зависимостями**. Зависимости (редко меняющиеся библиотеки, такие как React) упаковываются отдельно. Исходный код обрабатывается динамически и подгружается по запросу, что делает процесс разработки быстрее и проще.
4. **Расширяемость**. Vite предлагает удобный API для создания плагинов и поддержку типов для JavaScript и TypeScript, что делает его подходящим для сложных проектов.

В крупных приложениях, где количество модулей может исчисляться тысячами, размер бандлов часто становится критически большим, что замедляет загрузку страниц и ухудшает пользовательский опыт.

**Vite** помогает решить эти проблемы за счет:

- **Ускорения разработки**. Мгновенные обновления при изменении кода.
- **Оптимизации сборки**. Уменьшение размера финальных файлов.
- **Интеграции современных стандартов**. Использование нативных ES-модулей для повышения производительности.

### Зачем необходимо знать о сборке?

В процессе разработки и последующего развертывания React-приложения сборка является необходимым этапом. Написанный код, состоящий из множества файлов, нужно объединить в один или несколько бандлов, чтобы приложение можно было запустить на сервере.

Сборка играет важную роль даже на этапе разработки. Сборщик не только помогает обрабатывать ваш код, но и обеспечивает обновление страницы в браузере при внесении изменений, что значительно ускоряет процесс разработки и улучшает удобство работы.

<img src="https://img001.prntscr.com/file/img001/lJMLv1LJRO2cflJQtBkmKA.png" style="width: 100%; max-width: 650px" />

[^1]: *NodeJS*, nodejs.org [online resource]. Available at: https://nodejs.org/en/about/
[^2]: *npm*, npmjs.com [online resource]. Available at: https://www.npmjs.com/
[^3]: *webpack*, webpack.js.org [online resource]. Available at: https://webpack.js.org/
[^4]: *vite*, vite.dev [online resource]. Available at: https://vite.dev/