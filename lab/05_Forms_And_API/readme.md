# Лабораторная работа №5. Формы, валидация и работа с API

## Цель работы

Освоить создание форм в React, научиться управлять вводом пользователя и выполнять валидацию. Получить навыки взаимодействия с REST API: отправка и получение данных с сервера. Перейти от использования локальных данных к работе с внешним API.

## Условия

Продолжите разработку интернет-магазина из предыдущих лабораторных работ. На этом этапе данные о товарах должны загружаться с удалённого сервера (mockapi.io), а новые товары должны добавляться через форму и сохраняться на сервере. Локальное хранение товаров больше не используется.

### Задание 1. Подготовка среды

1. Зарегистрируйтесь на https://mockapi.io и создайте новый проект.
2. Создайте ресурс `products` (где `products` — это название ваших товаров).
3. Заполните API начальными данными одним из следующих способов:
   - Скопируйте структуру из вашего локального JSON-файла, использованного ранее.
   - Или вручную добавьте 5–6 тестовых записей.
4. Скопируйте базовый URL вашего API — он понадобится для выполнения запросов в приложении.

### Задание 2. Загрузка данных с сервера и отображение товаров

1. Обновите компонент, отображающий список товаров, чтобы данные загружались с `mockapi.io`.
2. Используйте хук `useEffect` для выполнения `GET-запроса` при монтировании компонента.
3. Храните полученные данные в состоянии через `useState`.
4. Отобразите список товаров, полученных с сервера.
5. Добавьте индикатор загрузки, чтобы пользователь видел, что данные загружаются.
   - Используйте состояние `loading` для отслеживания процесса загрузки.
   - Отображайте сообщение "Загрузка..." или индикатор загрузки, пока данные не будут получены.
6. _Дополнительное задание_. Используйте skeleton-эффект для отображения загрузки товаров.
   - Используйте библиотеку `react-loading-skeleton` для создания эффекта скелетона.
   - Импортируйте и используйте компонент `Skeleton` в месте, где должны отображаться товары.

_Примечание_: Удалите (или закомментируйте) локальные данные, если они использовались ранее — теперь источник данных только API.

### Задание 3. Создание формы добавления товара с валидацией

1. Создайте новый компонент `ProductForm.jsx.`, который будет содержать форму для добавления нового товара.
   1. Форма может быть на той же странице, что и список товаров, или на отдельной странице.
2. Реализуйте валидацию формы.
3. Отображайте сообщения об ошибках под соответствующими полями при некорректном вводе.

### Задание 4. Отправка данных на сервер

1. При отправке формы:
   1. Выполните POST-запрос на `https://<your-project>.mockapi.io/products` (где `products` - название вашего API), с введёнными данными.
   2. Используйте библиотеку `axios` (_предпочительно_) или `fetch` для выполнения запроса.
   3. После успешного перенаправления на страницу со списком товаров.
      - _Примечание_: Если форма на той же странице, обновите список товаров.
2. После успешного добавления товара:
   1. Либо перенаправьте пользователя на страницу со списком товаров (например, с помощью `useNavigate` из `react-router-dom`)
   2. Либо обновите список товаров на текущей странице, если форма и список отображаются вместе.
3. Убедитесь, что после обновления пользователь видит добавленный товар.

### Задание 5. _Дополнительное задание_. Реализация поиска по товарам

1. Реализуйте поиск товаров по названию (поле `name`), отображая только те, которые соответствуют введённому тексту.
2. Поиск должен быть чувствителен к изменению текста в режиме реального времени (реактивный). Используйте библиотеку `lodash.debounce` для оптимизации запросов к API.
3. _Дополнительно_: реализуйте нечувствительный к регистру поиск (по желанию).

### Задание 6. _Дополнительное задание_. Редактирование и удаление товара

1. Удаление товара:

   1. Для каждого товара в списке добавьте кнопку Удалить.
   2. При нажатии на кнопку выполните `DELETE-запрос` к API.
   3. После успешного удаления обновите список товаров (_например_, с помощью фильтрации или повторного запроса).

2. Редактирование товара:

   1. Для каждого товара добавьте кнопку Редактировать.
   2. При нажатии отобразите форму (можно ту же `ProductForm.jsx`, но в режиме редактирования), в которую подставляются текущие значения товара.
   3. При сохранении выполните `PUT-запрос` к API.
   4. После успешного изменения — обновите отображение товара в списке.
   5. Реализуйте проверку, чтобы форма редактирования имела ту же валидацию, что и форма добавления.

## Контрольные вопросы

1. Что такое клиентская валидация и какова её роль в веб-приложениях?
2. Что такое API и как он работает?
3. Что такое REST API. В чём разница между понятием API и REST API?
4. Как организовать загрузку данных с сервера при монтировании компонента?
