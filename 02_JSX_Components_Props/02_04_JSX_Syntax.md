# Синтаксис JSX

В предыдущей главе вы создали свой первый компонент. Теперь мы углубимся в тему и поговорим о том, как создавать компоненты и использовать синтаксис JSX.

## Что такое JSX?

**JSX (JavaScript XML)** — это **расширение языка JavaScript, которое позволяет писать HTML-подобный код внутри JavaScript**. Оно используется для описания пользовательских интерфейсов React. JSX облегчает работу с DOM-элементами, делая код более выразительным и удобным для чтения [^1].

**Пример 1.** _Разметка в JSX_

```jsx
function App() {
  return (
    <div>
      <h1>Hello, React!</h1>
    </div>
  );
}
```

## Как работает JSX?

JSX позволяет создавать структуры DOM (HTML-разметку), которые затем преобразуются React в обычные JavaScript-объекты (React-элементы). Эти объекты используются для управления DOM.

> [!NOTE]
> Под капотом JSX превращается в вызовы функций `React.createElement`, что делает его совместимым с JavaScript.

**Пример 2.** _Преобразование JSX в JavaScript_

```jsx
const element = <h1>Hello, React!</h1>;
```

Транслируется в:

```js
const element = React.createElement('h1', null, 'Hello, React!');
```

Простыми словами вы можете совмещать JavaScript и HTML в одном файле, что делает код более читаемым и удобным для работы.

### Преимущества JSX

- **Читаемость кода**. Благодаря схожести с HTML, JSX делает код более интуитивно понятным.
- **Интеграция с JavaScript**. Вы можете использовать JavaScript-выражения прямо внутри JSX.
- **Оптимизация производительности**. React использует виртуальный DOM, чтобы минимизировать изменения в реальном DOM.
- **Безопасность**. JSX автоматически экранирует значения для предотвращения инъекций кода (XSS).

### Использование JSX

Рассмотрим пример, где HTML и JavaScript разделены. Такой подход вы, вероятно, использовали ранее при создании веб-страниц.

```html
<!-- index.html -->
<div>
  <p>
    <!-- Content -->
  </p>
  <form>
    <!-- Form -->
  </form>
  <script src="script.js"></script>
</div>
```

```js
// script.js
function onClick() {}
function onSubmit() {}
function changeContent() {}
```

В JSX вы можете объединить разметку и логику в одном месте:

```jsx
Form() {
    onClick() { }
    onSubmit() { }

    return (
        <div>
        <p onClick>
            <!-- Content -->
        </p>
        <form onSubmit>
            <!-- Form -->
        </form>
        </div>
    );
}
```

## Правила использования JSX

JSX имеет свои правила и ограничения, которые важно понимать для успешной разработки React-приложений [^1].

### 1. Все элементы JSX должны быть обернуты в один корневой элемент

JSX всегда должен возвращать единственный корневой элемент. Например, следующий код приведет к ошибке:

```jsx
function App() {
  return (
    <h1>Hello, React!</h1>
    <p>Welcome to the world of React!</p>
  );
}
```

Для исправления ошибки необходимо обернуть элементы в один общий элемент.

```jsx
function App() {
  return (
    <div>
      <h1>Hello, React!</h1>
      <p>Welcome to the world of React!</p>
    </div>
  );
}
```

Если создание дополнительного элемента нежелательно, можно использовать фрагменты (`<>`), которые часто называют "пустыми тегами".

```jsx
function App() {
  return (
    <>
      <h1>Hello, React!</h1>
      <p>Welcome to the world of React!</p>
    </>
  );
}
```

При использовании фрагментов в React не создаётся дополнительный элемент в DOM. Это позволяет сохранить структуру разметки, так как фрагменты рендерятся без добавления дополнительных узлов и фактически игнорируются в итоговой разметке.

> [!TIP]
> Используйте фрагменты, чтобы избежать создания лишних DOM-узлов.

### 2. Все элементы JSX должны быть закрыты

В JSX все элементы должны быть закрыты, даже если они не содержат вложенных элементов.

Например, следующий код вызовет предупреждение:

```jsx
function App() {
  return (
    <input type="text">
  );
}
```

Хоть данный элемент и однострочный, его нужно закрыть с помощью `/`.

```jsx
function App() {
  return <input type="text" />;
}
```

### 3. Использование camelCase для атрибутов

JSX использует camelCase для именования атрибутов, чтобы согласовывать их с JavaScript-стилем написания. **Например**:

- Вместо `class` используется `className`.
- Вместо `onclick` используется `onClick`.
- Вместо `tabindex` используется `tabIndex`.

**Пример 3.** _Использование camelCase для атрибутов_

```jsx
function App() {
  return (
    <button className="btn" tabIndex="1">
      Click me
    </button>
  );
}
```

> [!NOTE]
> Исключение составляют специальные атрибуты, такие как `aria-*` и `data-*`, которые пишутся без изменений.

## Использование JavaScript внутри JSX

JSX позволяет использовать JavaScript-выражения внутри фигурных скобок `{}`. В фигурных скобках можно использовать только выражения, а не инструкции.

**Пример 4.** _Использование переменной в JSX_

```jsx
function App() {
  const name = 'React';
  return <h1>Hello, {name}!</h1>;
}
```

В результате рендеринга на странице отобразится текст: `Hello, React!`.

**Пример 5.** _Использование функции в JSX_

```jsx
function App() {
  const greet = (name) => `Hello, ${name}!`;

  return <h1>{greet('React')}</h1>;
}
```

**Пример 6.** _Использование выражения в JSX_

```jsx
function App() {
  return <h1>2 + 2 = {2 + 2}</h1>;
}
```

В результате рендеринга на странице отобразится текст: `2 + 2 = 4`.

## Ограничения в JSX

JSX не поддерживает использование инструкций, таких как `if`, `for`, или `while`.

**Пример 7.** _Неверное использование инструкции в JSX_

```jsx
function App() {
  const isReact = true;

  return (
    if (isReact) {
      <h1>Hello, React!</h1>;
    }
  );
}
```

Для решения этой проблемы используйте тернарный оператор или логическое ИЛИ.

**Пример 8.** _Использование тернарного оператора в JSX_

```jsx
function App() {
  const isReact = true;

  return (
    <div>
      <p>{isReact ? <h1>Hello, React!</h1> : <h1>Welcome!</h1>}</p>
    </div>
  );
}
```

> [!TIP]
> Для упрощённого понимания можно считать JSX отдельным типом данных, представляющим собой HTML-подобный синтаксис, встроенный в JavaScript.



[^1]: _Writing Markup with JSX_. react.dev [online resource]. Available at: https://react.dev/learn/writing-markup-with-jsx
