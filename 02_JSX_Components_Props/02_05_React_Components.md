# Создание компонентов в React

В React компоненты являются строительными блоками пользовательских интерфейсов [^1].

Существует два основных способа их создания: **классовые** и **функциональные** компоненты.

## Классовые компоненты

**Классовые компоненты** — это традиционный способ создания компонентов в React. Они являются классами ES6, которые наследуются от `React.Component.`

Однако функциональные компоненты заменили классовые как более простой и предпочтительный способ создания компонентов.

**Пример 1.** _Классовый компонент_

```jsx
import React from 'react';

class MyComponent extends React.Component {
  render() {
    return <h1>Hello, React!</h1>;
  }
}

export default MyComponent;
```

**Особенности**:

- Классы-компоненты должны наследоваться от `React.Component`.
- Используют метод render для возврата `JSX-разметки`.

> [!WARNING]
> Классовые компоненты **считаются устаревшими**. Новым проектам рекомендуется **использовать функциональные компоненты**.

## Функциональные компоненты

**Функциональные компоненты** — это современный способ создания компонентов в React. Они представляют собой обычные функции, которые принимают входные данные (props) и возвращают JSX-разметку.

**Почему функциональные компоненты предпочтительны?**

- **Простота**. Они проще в написании и чтении.
- **Меньше кода**. Нет необходимости наследовать класс или использовать метод render.

**Пример 2.** _Функциональный компонент_

```jsx
function MyComponent() {
  return <h1>Hello, React!</h1>;
}

export default MyComponent;
```

**Пример 3.** _Использование функционального компонента_

```jsx
import MyComponent from './MyComponent';

function App() {
  return (
    <div>
      <MyComponent />
    </div>
  );
}
```

## Где хранить компоненты?

В React-приложениях рекомендуется организовывать структуру файлов так, чтобы компоненты были легко доступны и логически сгруппированы.

Для небольших проектов рекомендуется хранить компоненты в отдельной директории `components`, расположенной внутри директории `src`. Это упрощает организацию кода и делает структуру проекта более понятной.

**Пример 4.** _Структура файлов проекта_

```
my-app/
├── src/
│   ├── components/
│   │   ├── Header.jsx
│   │   ├── Footer.jsx
│   ├── App.jsx
```

## Как создать компонент в React?

1. **Создайте новый файл.**
   - Название файла должно быть понятным, отражать назначение компонента и начинаться с заглавной буквы.
   - **Пример**: `Header.jsx`
2. **Создайте функцию для компонента.**

   - Имя функции должно совпадать с именем файла.1
   - Функция должна возвращать JSX-разметку.

   ```jsx
   function Header() {
     return (
       <header>
         <h1>My React App</h1>
       </header>
     );
   }
   ```

3. **Экспортируйте компонент.**

   - Экспортируйте компонент из файла с помощью `export default`, чтобы он стал доступным для использования в других частях приложения.

   ```jsx
   function Header() {
     return (
       <header>
         <h1>My React App</h1>
       </header>
     );
   }

   export default Header;
   ```

4. **Импортируйте компонент**

   - Чтобы использовать компонент, выполните его импорт в нужном месте:

   ```jsx
   import Header from './components/Header';

   function App() {
     return (
       <div>
         <Header />
       </div>
     );
   }

   export default App;
   ```

## Пример создания и использования компонентов

Рассмотрим пример структуры страницы:

<img src="https://imgur.com/5GeAKYQ.png" style="width: 100%; max-width: 800px;" />

Попробуем реализовать эту структуру с использованием React-компонентов. Создадим два функциональных компонента: `Header` и `Post`.

### Компонент `Header`

Создайте файл `Header.jsx` в папке `components` со следующим содержимым:

```jsx
function Header() {
  return (
    <header>
      <h1>My React App</h1>
    </header>
  );
}

export default Header;
```

### Компонент `Post`

Создайте файл `Post.jsx` в папке `components` со следующим содержимым:

```jsx
function Post() {
  return (
    <div>
      <h1>Post title goes here.</h1>
      <p>Post contennt goes here.</p>
    </div>
  );
}

export default Post;
```

### Корневой компонент `App`

Измените файл `App.jsx` следующим образом, добавив `<Header />` и `<Post />`:

```jsx
import Post from './components/Post';
import Header from './components/Header';

function App() {
  return (
    <div>
      <Header />
      <div>
        <Post />
      </div>
    </div>
  );
}

export default App;
```

При переходе на страницу вы увидите заголовок `My React App`, а под ним информацию о посте.

> [!NOTE]
> При использовании компонентов код становится более структурированным, повторно используемым и легко читаемым, что облегчает разработку и поддержку приложения.

Теперь можно проследить общую связь компонентов и их рендеринг.

<img src="https://imgur.com/12p0JZC.png" style="width: 100%; max-width: 800px;" />

> [!NOTE]
>  **Рендеринг** - это процесс преобразования React-компонентов в DOM-элементы, которые отображаются в браузере.

## Дочерние и родительские компоненты в React

В React-приложениях компоненты организуются иерархически. Часто один компонент содержит другие компоненты, что приводит к их разделению на родительские и дочерние.

- **Дочерний компонент** — компонент, который находится внутри другого компонента.
- **Родительский компонент** — компонент, который содержит один или несколько дочерних компонентов.
- **Корневой компонент** — верхнеуровневый компонент, с которого начинается иерархия приложения. Обычно это `App`.

**Пример 5.** _Дочерний и родительский компонент_

```jsx
import LikeButton from './Header';

function Post() {
  return (
    <div>
      <p>Post information goes here.</p>
      <LikeButton />
    </div>
  );
}
```

1. Компонент `LikeButton`:
   - Находится внутри компонента `Post`.
   - Является **дочерним** компонентом для `Post`.
2. Компонент `Post`:
   - Содержит `LikeButton`.
   - Является **родительским** компонентом для `LikeButton`.

## Когда разделять компоненты?

Разделение компонентов — это важная часть разработки React-приложений. Хотя строгих правил нет, есть несколько рекомендаций, которые помогут определить, когда и как выделять компоненты.

1. **Повторное использование**. Если часть интерфейса используется в нескольких местах приложения, её стоит вынести в отдельный компонент.
   **Пример**:
   - Кнопка с одинаковым стилем и функционалом (`Button`).
   - Карточка товара, поста, профиля (`Card`, `PostCard`, `ProfileCard`).
2. **Разделение логики**. Если компонент содержит слишком много логики или решает несколько задач, его стоит разбить на более мелкие. Это упрощает понимание и тестирование кода.
   **Пример**:
   - Компонент, отвечающий за фильтрацию и отображение списка, можно разделить на `Filter` (фильтр) и `ItemList` (список элементов).
3. **Улучшение читаемости**. Если компонент становится слишком большим (например, более 200 строк кода), его стоит разделить на части, чтобы улучшить читаемость.
   **Пример**:
   - Главная страница (`HomePage`) может быть разделена на `Header`, `MainContent`, `Footer`.
4. **Логическое разделение**. Компоненты можно разделять по их функциональности:
   - UI-компоненты (отвечают за внешний вид, например, `Button`, `Modal`).
   - Контейнеры (отвечают за логику и данные, например, `UserList`, `PostDetails`).
   - Страницы (отвечают за отображение целых страниц, например, `HomePage`, `ProfilePage`).

## Когда не нужно разделять компоненты

1. **Избыточная детализация**. Если компонент слишком прост и его нет смысла переиспользовать, то выделение будет лишним. Например, отдельный компонент для `<h1>` с одним текстом и без стилей избыточен.
2. **Снижение читабельности**. Излишнее дробление может привести к тому, что будет сложно понять, как компоненты взаимодействуют между собой.

## Как назвать компонент?

При выборе имени для компонента следует придерживаться следующих правил:

1. **Используйте существительные**. Название компонента должно отражать его назначение.
   **Примеры**:
   - `Header` для отображения шапки страницы.
   - `PostCard` для карточки поста.
   - `Sidebar` для боковой панели.
2. **Используйте описательные названия**. Название должно чётко описывать функциональность компонента, избегайте слишком общих имён.
   **Примеры**:
   - `NotificationBadge` лучше, чем просто `Badge`.
   - `LoginForm` лучше, чем просто `Form`.
3. **Следуйте иерархии и контексту**. Если компонент используется внутри другого, его название может быть связано с родительским компонентом.
   **Примеры**:
   - `PostCard` внутри `PostList`.
   - `UserAvatar` внутри `UserProfile`.

### Использование приставок в именах компонентов

В React часто используют приставки в именах компонентов, чтобы обозначить их контекст или тип. Это делает структуру приложения более понятной и помогает лучше организовать код.

Распространённые приставки:

1. `Card`. Используется для обозначения компонентов, отображающих информацию в карточном формате.
   **Примеры**:
   - `PostCard` — карточка поста.
   - `ProductCard` — карточка товара.
   - `UserCard` — карточка профиля пользователя.
2. `List`. Используется для компонентов, отображающих список элементов.
   **Примеры**:
   - `PostList` — список постов.
   - `UserList` — список пользователей.
   - `TaskList` — список задач.
3. `Item`. Используется для обозначения отдельных элементов в списке.
   **Примеры**:
   - `PostItem` — элемент списка постов.
   - `MenuItem` — элемент меню.
   - `ProductItem` — элемент списка товаров.
4. `Form`. Используется для обозначения форм ввода данных.
   **Примеры**:
   - `LoginForm` — форма входа.
   - `RegistrationForm` — форма регистрации.
   - `ContactForm` — форма для обратной связи.
5. `Modal`. Указывает на модальное окно.
   **Примеры**:
   - `LoginModal` — модальное окно для входа.
   - `ConfirmModal` — окно для подтверждения.
   - `InfoModal` — окно с информацией.
6. `Sidebar`. Используется для боковой панели.
   **Примеры**:
   - `UserSidebar` — боковая панель пользователя.
   - `NavigationSidebar` — боковая панель навигации.

> [!TIP]
> Использование приставок улучшает структуру проекта, делая его более логичным и удобным для понимания всеми членами команды.

[^1]: *Importing and Exporting Components*. react.dev [online resource]. Available at: https://react.dev/learn/importing-and-exporting-components