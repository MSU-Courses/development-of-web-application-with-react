# Что такое API?

## Введение в API

### Пример из реальной жизни

Прежде чем рассмотреть, что такое API в программировании, давайте рассмотрим пример из реальной жизни. Я пока не буду расшифровывать данное понятие, а просто приведу аналогию.

Представьте, что вы пришли в ресторан. Открываете меню, выбираете блюдо — допустим, фуа-гра с трюфелями. Подходит официант, вы называете заказ, и он уходит на кухню. Там повар готовит ваше блюдо и передаёт его обратно официанту, который приносит его к вашему столику. Правда обычная ситуация?

_А теперь задайтесь вопросом_: вы знаете, что именно происходит на кухне? Как повар готовит еду? Какие процессы и технологии он использует? Скорее всего — нет. Вы просто сделали заказ и получили результат. А повар знает, кто вы такой и зачем вам эта фуа-гра? Тоже нет. Он просто получил указание от официанта, и выполнил его.

По сути, вы и повар взаимодействовали, но не напрямую, **а через посредника** — _официанта_.

Вы не обязаны понимать, как работает кухня, чтобы заказать блюдо. Вам достаточно знать, что и как сказать официанту. А повару не нужно знать, кто вы такой — ему нужно только понимать, какой заказ вы сделали и как его выполнить.

Данный пример вроде бы очевиден, но он очень хорошо иллюстрирует, что такое API.

В "реальном мире", API — это посредник между двумя сторонами, который передаёт запрос и возвращает результат. И эта аналогия пригодится нам ещё не раз. Держите её в голове.

Попробуйте держать данный пример у себя в голове, я буду к нему возвращаться в дальнейшем.

### API в программировании

Теперь давайте перенесём пример в "мир" программирования.

**API (Application Programming Interface)** — это программный интерфейс, то есть набор правил и способов, с помощью которых одно приложение может взаимодействовать с другим. По сути, это как общий язык или протокол, по которому программы "разговаривают" друг с другом.

Звучит немного сложно, правда? Давайте объясним проще — и потом вы сможете перечитать определение с новым пониманием.

Представьте, что у вас есть два приложения:

- Приложение `A` — создаёт пользователей. (Написано на PHP)
- Приложение `B` — отправляет этим пользователям письма на почту. (Написано на C++)

Цель у них общая — работать с пользователями. Но вот незадача: они написаны на разных языках, и каждое живёт своей жизнью. Как им взаимодействовать? **Bingo**! Именно здесь на сцену выходит API.

Один из примитивных способов связи — использовать файл.

- Приложение `A` записывает пользователей в файл `users.txt`,
- Приложение `B` периодически читает этот файл и отправляет письма.

Они напрямую друг о друге ничего не знают. Но умеют работать с одним общим ресурсом. Это и есть интерфейс взаимодействия — пусть и простой.

Такой подход и есть форма API — пусть базовая и немного «кустарная». Тем не менее, он работает! `A` и `B` обмениваются данными, не вникая во внутренние детали работы друг друга.

Главное, чтобы оба приложения следовали одним и тем же правилам: как именно данные должны быть записаны и как их затем считать. Эти договорённости и составляют их API, то есть правила взаимодействия.

Вернёмся к примеру с рестораном. В данном случае:

- Приложение `A` — это вы.
- Приложение `B` — это повар.
- `Файл` — это официант.

Вы не знаете, как работает кухня. Повар не знает, кто вы. Но через официанта вы прекрасно общаетесь. Официант выступает в роли интерфейса между вами и поваром (API).

Попробуйте еще раз прочитать определение API в начале данной главы, возможно, теперь оно стало более понятным.

### Почему API называют интерфейсом?

Мы несколько раз сказали, что API — это **интерфейс**. Почему именно интерфейс?

**Интерфейс** — это граница или точка соприкосновения между двумя системами. _Например_, кнопки на кофемашине — это её интерфейс. Вы нажимаете на "капучино", и кофемашина готовит его. Вам не нужно знать, как она устроена изнутри. Вам достаточно взаимодействовать через понятный интерфейс.

Точно так же и в программировании: API — это интерфейс, через который одна программа может взаимодействовать с другой. Это своего рода набор «кнопок» и «команд», с помощью которых можно "нажать" на нужные функции другого приложения, не вникая в его внутреннюю реализацию.

_Например_, приложение `A` может отправить запрос приложению `B` через API, чтобы получить какие-то данные или выполнить нужную операцию. При этом `A` не знает, на каком языке написано `B`, как устроена его база данных или логика. Ему достаточно знать, как правильно отправить запрос — и получить ответ.

В качестве такой «кнопки» может выступать обычный HTTP-запрос. Допустим:

- Приложение `A` отправляет запрос к сервису `B` и "говорит": _"Дай мне данные пользователя с ID=123"_
- Приложение `B` получает этот запрос, обрабатывает его и возвращает ответ: _"Вот данные пользователя с ID=123: Имя, Фамилия, Email"_

Вот и всё — `A` получил нужную информацию, не зная, как именно она была получена.

Если снова вернуться к аналогии с рестораном, **официант — это интерфейс**, позволяющий вам взаимодействовать с поваром. Вы не знаете, как устроена кухня, а повар не знает, кто вы, и, возможно, даже говорит на другом языке. Но официант принимает ваш заказ и передаёт его на кухню, а потом приносит вам результат. Всё просто и эффективно — и именно так работает API в цифровом мире.

## Что такое REST API и чем он отличается от API?

Ранее мы уже говорили, что API — это интерфейс, позволяющий приложениям взаимодействовать друг с другом. Например, мы рассматривали вариант с файлом, через который два приложения могли обмениваться данными. Это был один из способов реализации API, который, кстати, до сих пор используется, но не в веб-разработке.

В веб-разработке существует много различных способов реализации API. Один из самых популярных и распространённых — это **REST API**.

### REST: понятие и суть

**REST (от англ. Representational State Transfer)** — это архитектурный стиль построения API, основанный на использовании стандартных протоколов веба, прежде всего HTTP. REST описывает принципы, по которым клиент и сервер могут обмениваться данными. [^1].

Проще говоря, REST API — это такой способ общения между приложениями, при котором доступ к данным происходит по URL-адресам (их ещё называют эндпоинтами), с помощью стандартных HTTP-методов (GET, POST, PUT, DELETE и др.).

REST API не возвращает веб-страницу или интерфейс — он возвращает только данные, чаще всего в формате JSON. Эти данные можно использовать в любом приложении, которое умеет делать HTTP-запросы и обрабатывать ответы.

### Пример: система управления задачами

Рассмотрим, как это работает на примере.

Допустим, у вас есть система для управления задачами. Она состоит из двух независимых приложений:

- Приложение `A` — отвечает за сохранение задач в базе данных.
- Приложение `B` — отображает задачи пользователю на экране.

Эти приложения могут быть написаны на разных языках программирования, находиться на разных серверах и даже разработаны разными командами. Главное, чтобы они умели общаться друг с другом. REST API как раз и решает эту задачу — он предоставляет единый стандарт общения между приложениями.

### Как это работает

1. Приложение `A` предоставляет REST API — то есть открытые URL-адреса (эндпоинты), по которым можно обращаться к задачам.
2. Приложение `B` отправляет HTTP-запрос, чтобы получить список задач. Например: `GET https://example.com/api/tasks`.
3. Приложение `A` получает запрос, обрабатывает его и возвращает данные в формате JSON:

   ```json
   {
     "tasks": [
       {
         "id": 1,
         "title": "Задача 1",
         "completed": false
       },
       {
         "id": 2,
         "title": "Задача 2",
         "completed": true
       }
     ]
   }
   ```

4. Приложение `B` получает ответ, разбирает JSON и отображает задачи пользователю.

Даже если приложение `A` написано на Python, а приложение `B` на JavaScript, они спокойно взаимодействуют через REST API.

REST API делает возможным создание модульных и гибких систем:

1. Каждое приложение может выполнять свою роль, не зная деталей других.
2. Всё, что нужно — это знать, какой запрос отправить и какой ответ получить.
3. REST API работает через HTTP — а значит, любой язык, любая платформа может с ним взаимодействовать.
4. Формат JSON легко обрабатывается в JavaScript (а значит и в React, Vue, Angular и других фреймворках).

### REST API: просто, но не примитивно

Несмотря на то, что REST API выглядит просто — "отправь запрос, получи ответ" — за ним стоит целая философия и набор принципов и стандартнов, касающихся структуры URL-адресов, обработки состояний, работы с кэшированием, безопасностью и многим другим.

Но не волнуйтесь: наша цель сейчас — **научиться использовать REST API**, а не разрабатывать его с нуля. Глубокое погружение в архитектуру REST — это тема для отдельных курсов и профессионального роста.

Если Вам интересно разобраться в REST API подробнее, рекомендую ознакомится с [restfulapi.net](restfulapi.net) - это сайт, посвящённый REST API и его принципам. Там есть много полезной информации, примеров и рекомендаций по проектированию REST API. 

> [!NOTE]
> Если REST API разработан по данным прицнипам, и соблюдает все или почти все из них, то его называют **RESTful API**.

[^1]: _Что такое API? Простое объяснение для начинающих_. devby.io [online resource]. Available at: https://devby.io/news/chto-takoe-api-prostym-yazykom
