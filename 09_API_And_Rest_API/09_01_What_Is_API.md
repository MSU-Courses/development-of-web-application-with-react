# Что такое API?

## Введение в API

### Пример из реальной жизни

Прежде чем рассмотреть, что такое API в программировании, давайте рассмотрим пример из реальной жизни. Я пока не буду расшифровывать данное понятие, а просто приведу аналогию.

Представьте, что вы пришли в ресторан. Открываете меню, выбираете блюдо — допустим, фуа-гра с трюфелями. Подходит официант, вы называете заказ, и он уходит на кухню. Там повар готовит ваше блюдо и передаёт его обратно официанту, который приносит его к вашему столику. Правда обычная ситуация?

_А теперь задайтесь вопросом_: вы знаете, что именно происходит на кухне? Как повар готовит еду? Какие процессы и технологии он использует? Скорее всего — нет. Вы просто сделали заказ и получили результат. А повар знает, кто вы такой и зачем вам эта фуа-гра? Тоже нет. Он просто получил указание от официанта, и выполнил его.

По сути, вы и повар взаимодействовали, но не напрямую, **а через посредника** — _официанта_.

Вы не обязаны понимать, как работает кухня, чтобы заказать блюдо. Вам достаточно знать, что и как сказать официанту. А повару не нужно знать, кто вы такой — ему нужно только понимать, какой заказ вы сделали и как его выполнить.

Данный пример вроде бы очевиден, но он очень хорошо иллюстрирует, что такое API.

В "реальном мире", API — это посредник между двумя сторонами, который передаёт запрос и возвращает результат. 

Попробуйте держать данный пример у себя в голове, я буду к нему возвращаться в дальнейшем.

### API в программировании

Теперь давайте перенесём пример в "мир" программирования.

**API (Application Programming Interface)** — это программный интерфейс, то есть набор правил и способов, с помощью которых одно приложение может взаимодействовать с другим. По сути, это как общий язык, по которому программы "разговаривают" друг с другом.

Звучит немного сложно, правда? Давайте объясним проще — и потом вы сможете перечитать определение с новым пониманием.

Представьте, что у вас есть два приложения:

- Приложение `A` — создаёт пользователей. (Написано на PHP)
- Приложение `B` — отправляет этим пользователям письма на почту. (Написано на C++)

Цель у них общая — работать с пользователями. Но вот незадача: они написаны на разных языках, и не могут напрямую взаимодействовать друг с другом. Как же им обмениваться данными? **Bingo!**, можно взаимодействовать через API.

Одним из примитивных, но наглядных способов организации взаимодействия между приложениями является обмен через файл.

- Приложение `A` записывает пользователей в файл `users.txt`,
- Приложение `B` периодически читает этот файл и, основываясь на его содержимом, отправляет письма пользователям.

Эти два приложения никак напрямую не связаны и ничего не знают о внутреннем устройстве друг друга. Однако они оба умеют работать с одним и тем же ресурсом — файлом `users.txt`. Это и есть их точка соприкосновения, их интерфейс взаимодействия.

Такой подход действительно представляет собой форму API — пусть и базовую, немного «кустарную», но вполне рабочую. В этом случае под API понимается набор следующих элементов:

- **Формат и структура данных внутри файла** — например: имя, email, дата регистрации и другие поля, записанные в определённой последовательности.
- **Договорённости между приложениями** A и B, включающие:
  - запись данных построчно;
  - использование запятой в качестве разделителя полей;
  - наличие заголовка в первой строке с названиями столбцов;
  - возможные правила обработки пустых строк, кодировок и т.п.

Эти соглашения и составляют интерфейс взаимодействия — API в минималистичном виде. Главное, что обе стороны его понимают и соблюдают.

Вернёмся к примеру с рестораном. В этой аналогии:

- Приложение `A` — это вы, клиент.
- Приложение `B` — это повар, который готовит еду.
- `Файл` — это официант.

Вы не знаете, как устроена кухня, и не общаетесь с поваром напрямую. Повар, в свою очередь, не знает, кто вы и зачем пришли. Тем не менее, вы можете легко взаимодействовать благодаря официанту, который принимает ваш заказ, передаёт его на кухню и приносит готовое блюдо. В этой схеме **официант, правила оформления заказа, структура меню и формат передачи информации между клиентом и кухней** — всё это вместе составляет API. Это упрощённый, но наглядный интерфейс взаимодействия между вами (клиентом) и системой (поваром), скрывающий внутреннюю реализацию и предоставляющий понятный способ коммуникации.

Попробуйте еще раз прочитать определение API в начале данной главы, возможно, теперь оно стало более понятным.

### Почему API называют интерфейсом?

Мы несколько раз говорили, что API — это **интерфейс**. Но почему именно _интерфейс_?

**Интерфейс** — это граница или точка соприкосновения между двумя системами. _Например_, кнопки на кофемашине — это её интерфейс. Вы просто нажимаете на кнопку «капучино», и машина начинает процесс приготовления. Вам не нужно знать, как работает нагреватель, насос или вспениватель молока — достаточно уметь пользоваться понятными кнопками.

Точно так же и в программировании: API — это интерфейс между программами. Это своего рода набор «кнопок» и «команд», с помощью которых одна программа может обратиться к функционалу другой, не зная, как он устроен внутри. Главное — понимать, как правильно вызвать нужную функцию, и что в ответ вернёт система.

_Например_, приложение `A` может отправить запрос приложению `B`, чтобы получить определённые данные или выполнить нужную операцию. При этом `A` не знает, на каком языке написано `B`, как устроена его база данных или внутренняя логика. Всё, что нужно — это понятный способ обращения, своего рода «кнопка», нажатие на которую вызывает нужное действие.

В программировании такую «кнопку» может представлять обычный HTTP-запрос. Допустим:

- Приложение `A` отправляет запрос к сервису `B` с формулировкой: _«Дай мне данные пользователя с ID=123»._
- Приложение `B` принимает этот запрос, обрабатывает его и возвращает ответ: _«Вот данные пользователя с ID=123: Имя, Фамилия, Email»_.

На этом взаимодействие завершено: `A` получил нужную информацию, не зная, как именно она была получена, какие запросы выполнялись к базе данных и какие процессы происходили внутри `B`. Они просто обменялись текстовыми данными через API.

Если снова обратиться к аналогии с рестораном, **официант — это интерфейс**, который позволяет вам взаимодействовать с поваром. Вы не знаете, как устроена кухня, а повар не знает, кто вы, и, возможно, даже говорит на другом языке. Тем не менее, официант принимает ваш заказ, передаёт его на кухню, а затем приносит готовое блюдо. Всё происходит просто, понятно и эффективно — именно так работает API в цифровом мире: он обеспечивает удобное и стандартизированное взаимодействие между двумя сторонами, скрывая внутренние детали реализации.

## Что такое REST API и чем он отличается от API?

Ранее мы уже говорили, что API — это интерфейс, позволяющий приложениям взаимодействовать друг с другом. В качестве примера мы рассматривали обмен данными через файл — простой, но рабочий способ реализации API. Такой подход до сих пор используется в некоторых сценариях, хотя и не является актуальным для веб-разработки.

В контексте веб-разработки существует множество более современных и гибких способов организации взаимодействия между системами. Один из самых популярных и широко применяемых — это **REST API**.

### REST: понятие и суть

**REST (от англ. Representational State Transfer)** — это архитектурный стиль построения API, основанный на использовании стандартных веб-протоколов, прежде всего HTTP. REST описывает принципы, по которым клиент и сервер обмениваются данными. [^1].

Проще говоря, **REST API** — это способ взаимодействия между приложениями, при котором доступ к данным осуществляется по URL-адресам (их также называют эндпоинтами) с использованием стандартных HTTP-методов, таких как GET, POST, PUT, DELETE и другие.

В отличие от веб-страниц, REST API не возвращает интерфейс или визуальное представление. Вместо этого он предоставляет данные, чаще всего в формате JSON. Эти данные могут быть использованы в любом приложении, которое умеет отправлять HTTP-запросы и обрабатывать полученные ответы.

### Пример: система управления задачами

Рассмотрим, как REST API работает на практике.

Представим, что у вас есть система для управления задачами, состоящая из двух независимых приложений:

- Приложение `A` — отвечает за сохранение задач в базе данных.
- Приложение `B` — отображает задачи пользователю на экране.

Эти приложения могут быть написаны на разных языках программирования, размещены на разных серверах и разработаны разными командами. Однако это не мешает им взаимодействовать — **главное, чтобы они «говорили» на одном языке**. И именно эту функцию выполняет **REST API**: он предоставляет единый, стандартизированный способ обмена данными между приложениями, независимо от их внутренней реализации.

### Как это работает

1. Приложение `A` предоставляет REST API — то есть набор открытых URL-адресов (эндпоинтов), по которым можно обращаться к задачам.
2. Приложение `B` отправляет HTTP-запрос, чтобы получить список задач. Например: `GET https://example.com/api/tasks`
3. Приложение `A` принимает запрос, обрабатывает его и возвращает данные в формате JSON:

   ```json
   {
     "tasks": [
       {
         "id": 1,
         "title": "Задача 1",
         "completed": false
       },
       {
         "id": 2,
         "title": "Задача 2",
         "completed": true
       }
     ]
   }
   ```

4. Приложение `B` получает ответ, разбирает JSON и отображает список задач пользователю.

Даже если приложение `A` написано на С++, а приложение `B` — на JavaScript, они легко взаимодействуют друг с другом через REST API. Это возможно потому, что им не нужно знать внутреннюю реализацию друг друга — они просто обмениваются данными в формате HTTP-запросов и JSON-ответов, с которыми оба умеют работать.

REST API делает возможным создание модульных и гибких систем, в которых:

1. Каждое приложение выполняет свою роль, не зная деталей реализации других компонентов.
2. Всё, что нужно для взаимодействия — это знать, какой запрос отправить и какой ответ ожидать.
3. REST API работает поверх HTTP, а значит, с ним может работать любой язык и любая платформа.
4. Формат JSON легко читается и обрабатывается, особенно в JavaScript и популярных фреймворках вроде React, Vue, Angular и других.

### REST API: просто, но не примитивно

Несмотря на внешнюю простоту — _«отправь запрос, получи ответ»_ — за REST API стоит целая философия, включающая набор принципов и стандартов. Они касаются структуры URL-адресов, управления состояниями, работы с кэшированием, безопасности и многого другого.

Но не переживайте: наша задача сейчас — _научиться использовать REST API_, а не разрабатывать его с нуля. Глубокое погружение в архитектуру REST — это уже тема для специализированных курсов и профессионального роста.

Если вам интересно разобраться в REST API подробнее, рекомендую ознакомиться с [restfulapi.net](restfulapi.net) — он посвящён REST и его ключевым принципам. Там вы найдёте много полезной информации, примеров и рекомендаций по проектированию REST API.

> [!NOTE]
> Если REST API разработан в соответствии с этими принципами и соблюдает их полностью (или почти полностью), его называют **RESTful API**.

## Recap: Что такое API и зачем нужен REST API?

1. **API (Application Programming Interface)** — это интерфейс взаимодействия между программами. Он позволяет одной программе обращаться к функционалу другой без необходимости знать, как она устроена внутри.
2. **Даже простая схема с файлом может быть формой API**: если два приложения договариваются, как структурировать данные и где их хранить — это уже интерфейс взаимодействия.
3. **Интерфейс** — это «точка соприкосновения» между двумя системами: как кнопка на кофемашине. Вы нажимаете — и получаете результат, не вникая в работу механизма.
4. **REST API** — это популярный способ организации API через веб. Основан на использовании HTTP-запросов (`GET`, `POST`, `PUT`, `DELETE`) и передачи данных в формате JSON.
5. REST API позволяет:
   - приложениям на разных языках работать вместе;
   - обмениваться только нужными данными (без лишней информации);
   - строить гибкие, масштабируемые архитектуры;
   - использовать любой язык, браузер или платформу для взаимодействия.
6. REST API выглядит просто («отправь запрос — получи ответ»), но опирается на чёткие принципы: структура URL, работа с кэшированием, безопасность и многое другое.

[^1]: _Что такое API? Простое объяснение для начинающих_. devby.io [online resource]. Available at: https://devby.io/news/chto-takoe-api-prostym-yazykom
